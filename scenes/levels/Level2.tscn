[gd_scene load_steps=15 format=3 uid="uid://dmb6yaqqbdgor"]

[ext_resource type="Script" path="res://scripts/base_level.gd" id="1_g1cww"]
[ext_resource type="Texture2D" uid="uid://bm2gfylya18x6" path="res://materials/enn_citrouille03.png" id="2_0w4ic"]
[ext_resource type="PackedScene" uid="uid://cu4qk30gh72x8" path="res://scenes/elements/moving_platform.tscn" id="2_f56am"]
[ext_resource type="TileSet" uid="uid://8jd3eqwvtp76" path="res://tilesets/tileset.tres" id="2_uqvsa"]
[ext_resource type="PackedScene" uid="uid://dokw05n2dslui" path="res://scenes/elements/toggleable_spikes.tscn" id="3_utycn"]
[ext_resource type="PackedScene" uid="uid://1m2siku6krim" path="res://scenes/elements/door.tscn" id="4_2fmj7"]
[ext_resource type="PackedScene" uid="uid://bth5xo6bxskba" path="res://scenes/enemies/enemy_spider.tscn" id="4_ffgve"]
[ext_resource type="PackedScene" uid="uid://drgbe6551a4os" path="res://scenes/elements/spikes.tscn" id="4_uyd1a"]
[ext_resource type="PackedScene" uid="uid://hnygefrtotfx" path="res://scenes/elements/bone.tscn" id="5_36hil"]
[ext_resource type="PackedScene" uid="uid://ck2m2kpsthl3l" path="res://scenes/elements/stasis_field.tscn" id="7_jn4cx"]
[ext_resource type="PackedScene" uid="uid://xynpr4h0gdnx" path="res://scenes/enemies/enemy_bat.tscn" id="8_obauu"]
[ext_resource type="PackedScene" uid="uid://c1tvdb40a26y0" path="res://scenes/elements/finish_area.tscn" id="12_yejf2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_emyvp"]
size = Vector2(1792, 1024)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8ge5x"]
size = Vector2(384, 512)

[node name="Level" type="Node2D"]
position = Vector2(896, 512)
script = ExtResource("1_g1cww")

[node name="LevelArea" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelArea"]
shape = SubResource("RectangleShape2D_emyvp")
debug_color = Color(0, 0.760784, 0.890196, 0.419608)

[node name="BourreauArea" type="Area2D" parent="."]
position = Vector2(704, 256)
collision_layer = 0
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="BourreauArea"]
shape = SubResource("RectangleShape2D_8ge5x")
debug_color = Color(0.941176, 0, 0, 0.419608)

[node name="StaticEnvironment" type="TileMap" parent="."]
tile_set = ExtResource("2_uqvsa")
format = 2
layer_0/modulate = Color(0.84, 0.5628, 0.77994, 1)
layer_0/z_index = 1
layer_0/tile_data = PackedInt32Array(-262132, 3, 0, -327668, 3, 0, -65525, 65536, 3, -65526, 65536, 3, -65529, 65536, 3, 65538, 3, 0, 2, 3, 0, -65534, 65536, 3, 65537, 65539, 0, 1, 3, 0, -65535, 65539, 0, -131071, 65539, 0, -65538, 3, 0, -65539, 3, 0, -65540, 3, 0, -65541, 3, 0, -65542, 3, 0, -131079, 65539, 0, -196615, 65539, 0, -262151, 3, 0, -327687, 3, 0, -393223, 3, 0, 131061, 65539, 0, 65525, 65539, 0, -11, 65539, 0, -65547, 65539, 0, -131083, 65539, 0, -196619, 65536, 3, 131060, 3, 0, 65524, 131075, 0, -12, 131075, 0, -65548, 131075, 0, -131084, 3, 0, -196620, 65536, 3, 131059, 3, 0, 65523, 131075, 0, -13, 131075, 0, -65549, 131075, 0, -131085, 131075, 0, -196621, 131075, 0, -65543, 3, 0, -393224, 3, 0, -262152, 65539, 0, -327688, 3, 0, -196616, 65539, 0, -131080, 65539, 0, -65544, 3, 0, 196615, 131075, 0, 131079, 131075, 0, 131074, 3, 0, 131073, 65539, 0, 131072, 65536, 3, 196607, 65536, 3, 196606, 65536, 3, 196605, 65536, 3, 196604, 65536, 3, 196603, 65536, 3, 196602, 65536, 3, 196601, 65536, 3, 196600, 65536, 3, 196599, 65536, 3, 196597, 65536, 3, 196598, 65536, 3, -65524, 65536, 3, 458739, 65539, 0, -458740, 3, 0, -458741, 3, 0, -458742, 3, 0, -458744, 65539, 0, -458743, 65539, 0, -458745, 65539, 0, -458746, 131075, 0, -458747, 131075, 0, -458748, 131075, 0, -458749, 131075, 0, -458750, 131075, 0, -458751, 3, 0, -458752, 3, 0, -393217, 3, 0, -393218, 3, 0, -393219, 3, 0, -393220, 131075, 0, -393221, 131075, 0, -393222, 3, 0, -393225, 131075, 0, -393226, 131075, 0, -393227, 131075, 0, -393228, 3, 0, -393229, 131075, 0, -327693, 3, 0, -393204, 3, 0, -196596, 3, 0, -131060, 3, 0, 393223, 65539, 0, 393222, 65536, 3, 393221, 65536, 3, 393220, 65536, 3, 393219, 65536, 3, 393218, 65536, 3, 393217, 65536, 3, 393216, 65536, 3, 458751, 65536, 3, -262157, 3, 0, 262151, 131075, 0, 327687, 65539, 0, 65543, 65539, 0, 7, 65539, 0, -65528, 65536, 3, -65527, 65536, 3, -131074, 3, 0, -196610, 131075, 0, -262146, 131075, 0, -327682, 131075, 0, -131078, 0, 3, -131077, 0, 3, -131076, 65536, 4, -327684, 3, 0, -327685, 3, 0, -327686, 3, 0, -327683, 131075, 0, -262147, 3, 0, -196611, 3, 0, -131075, 3, 0, -196607, 65539, 0, -262143, 65536, 3, -262142, 65536, 3, -262141, 65536, 3, -262140, 65536, 3, -262139, 65536, 3, -262138, 65536, 3, -262137, 65536, 3, -262136, 65536, 3, -65532, 65536, 3, 4, 65539, 0, 65540, 65539, 0, 131076, 65539, 0, 131075, 3, 0, 65539, 65539, 0, 3, 65539, 0, -65533, 65536, 3, 589819, 65536, 4, 589823, 65536, 4, 655355, 65536, 4, 655359, 65536, 4, 589818, 65536, 4, 589817, 65536, 3, 524288, 65536, 4, 524289, 0, 4, 524290, 0, 4, 524291, 0, 4, 524292, 65536, 4, 524293, 0, 4, 524294, 65536, 4, 524295, 65536, 4, 458759, 3, 0, 262137, 65539, 0, 327673, 65539, 0, 393209, 65539, 0, 393210, 65539, 0, 393211, 65539, 0, 327675, 65539, 0, 262139, 65539, 0, 262138, 65539, 0, 327674, 65539, 0, 589816, 65536, 3, 589815, 65536, 4, 589814, 65536, 4, 589813, 65536, 3, 589812, 65536, 4, 589811, 65536, 3, 524275, 65536, 3, 393204, 65536, 3, 393203, 65539, 0, 393205, 65536, 3, 393206, 65536, 3)

[node name="Misc" type="Node" parent="."]

[node name="Citrouille" type="Sprite2D" parent="Misc"]
z_index = 2
position = Vector2(608, 280)
texture = ExtResource("2_0w4ic")

[node name="Door" parent="Misc" instance=ExtResource("4_2fmj7")]
position = Vector2(160, 768)
is_player_toggleable = false

[node name="Bones" type="Node" parent="."]

[node name="Bone" parent="Bones" instance=ExtResource("5_36hil")]
position = Vector2(544, 480)

[node name="Bone2" parent="Bones" instance=ExtResource("5_36hil")]
position = Vector2(1056, 416)

[node name="Bone3" parent="Bones" instance=ExtResource("5_36hil")]
position = Vector2(1248, 224)

[node name="Bone4" parent="Bones" instance=ExtResource("5_36hil")]
position = Vector2(160, 992)

[node name="Enemies" type="Node" parent="."]

[node name="EnemySpider" parent="Enemies" instance=ExtResource("4_ffgve")]
position = Vector2(672, 480)
descend_wait_time = 1.25

[node name="Spikes" parent="Enemies" instance=ExtResource("4_uyd1a")]
position = Vector2(1632, 416)

[node name="EnemyBat" parent="Enemies" instance=ExtResource("8_obauu")]
position = Vector2(736, 984)
moveSpeed = 128.0

[node name="TimedSpiders" type="Node" parent="Enemies"]

[node name="EnemySpider2" parent="Enemies/TimedSpiders" instance=ExtResource("4_ffgve")]
position = Vector2(1120, 736)
descend_wait_time = -1.0

[node name="EnemySpider3" parent="Enemies/TimedSpiders" instance=ExtResource("4_ffgve")]
position = Vector2(1056, 736)
descend_wait_time = -1.0

[node name="EnemySpider4" parent="Enemies/TimedSpiders" instance=ExtResource("4_ffgve")]
position = Vector2(992, 736)
descend_wait_time = -1.0

[node name="MainSpidersTimer" type="Timer" parent="Enemies/TimedSpiders"]
wait_time = 5.0
autostart = true

[node name="Spider3Timer" type="Timer" parent="Enemies/TimedSpiders"]
wait_time = 0.25
one_shot = true

[node name="Spider4Timer" type="Timer" parent="Enemies/TimedSpiders"]
wait_time = 0.25
one_shot = true

[node name="SpawnPoint" type="Marker2D" parent="."]
unique_name_in_owner = true
position = Vector2(-704, -256)

[node name="DynamicEnvironment" type="Node" parent="."]

[node name="MovingPlatform" parent="DynamicEnvironment" instance=ExtResource("2_f56am")]
position = Vector2(288, 288)
rotation = 1.5708
orientation = 1
on_position = Vector2(0, -128)

[node name="MovingPlatform2" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(352, 288)
rotation = 1.5708
orientation = 1
sprite = NodePath("../MovingPlatform/MovingPlatform/Sprite2D")
on_position = Vector2(0, -128)

[node name="ToggleableSpikes" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(288, 608)

[node name="ToggleableSpikes2" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(352, 608)

[node name="ToggleableSpikes3" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(736, 608)

[node name="StasisField" parent="DynamicEnvironment" instance=ExtResource("7_jn4cx")]
position = Vector2(544, 480)
rotation = 3.14159
stasis_range = 3.0

[node name="MovingPlatform3" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(864, 672)
sprite = NodePath("../MovingPlatform/MovingPlatform/Sprite2D")
on_position = Vector2(0, -384)

[node name="MovingPlatform4" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(928, 672)
sprite = NodePath("../MovingPlatform/MovingPlatform/Sprite2D")
on_position = Vector2(0, -384)

[node name="ToggleableSpikes4" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(1056, 224)
is_on = true

[node name="ToggleableSpikes5" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(1184, 224)

[node name="ToggleableSpikes6" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(1312, 224)
is_on = true

[node name="ToggleableSpikes7" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(1440, 224)

[node name="MovingPlatform5" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(1696, 416)
rotation = -1.57079
sprite = NodePath("../MovingPlatform/MovingPlatform/Sprite2D")

[node name="ToggleableSpikes8" parent="DynamicEnvironment" instance=ExtResource("3_utycn")]
position = Vector2(1376, 416)

[node name="MovingPlatform6" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(1248, 928)
sprite = NodePath("../MovingPlatform/MovingPlatform/Sprite2D")
on_position = Vector2(0, -448)

[node name="MovingPlatform7" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(1312, 928)
sprite = NodePath("../MovingPlatform/MovingPlatform/Sprite2D")
on_position = Vector2(0, -448)

[node name="MovingPlatform8" parent="DynamicEnvironment" instance=ExtResource("2_f56am")]
position = Vector2(672, 1056)
on_position = Vector2(0, -128)

[node name="MovingPlatform9" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(736, 1056)
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -128)

[node name="MovingPlatform10" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(800, 1056)
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -128)

[node name="MovingPlatform11" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(416, 992)
rotation = 3.14159
orientation = 2
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -192)

[node name="MovingPlatform12" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(352, 992)
rotation = 3.14159
orientation = 2
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -192)

[node name="MovingPlatform13" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(416, 928)
rotation = 3.14159
orientation = 2
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -192)

[node name="MovingPlatform14" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(352, 928)
rotation = 3.14159
orientation = 2
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -192)

[node name="MovingPlatform15" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(416, 864)
rotation = 3.14159
orientation = 2
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -192)

[node name="MovingPlatform16" parent="DynamicEnvironment" node_paths=PackedStringArray("sprite") instance=ExtResource("2_f56am")]
position = Vector2(352, 864)
rotation = 3.14159
orientation = 2
sprite = NodePath("../MovingPlatform8/MovingPlatform/Sprite2D")
on_position = Vector2(0, -192)

[node name="FinishArea2" parent="." instance=ExtResource("12_yejf2")]
position = Vector2(-800, 256)

[connection signal="body_exited" from="LevelArea" to="." method="_on_level_area_body_exited"]
[connection signal="timeout" from="Enemies/TimedSpiders/MainSpidersTimer" to="Enemies/TimedSpiders/EnemySpider2" method="descend"]
[connection signal="timeout" from="Enemies/TimedSpiders/MainSpidersTimer" to="Enemies/TimedSpiders/Spider3Timer" method="start" binds= [0.25]]
[connection signal="timeout" from="Enemies/TimedSpiders/Spider3Timer" to="Enemies/TimedSpiders/EnemySpider3" method="descend"]
[connection signal="timeout" from="Enemies/TimedSpiders/Spider3Timer" to="Enemies/TimedSpiders/Spider4Timer" method="start" binds= [0.25]]
[connection signal="timeout" from="Enemies/TimedSpiders/Spider4Timer" to="Enemies/TimedSpiders/EnemySpider4" method="descend"]
